var e={"2010-01-01":{currency:"LVL",incomeTaxRate:26,riskFee:.25,socialTaxRates:[9,7.06,7.73],employerTaxRates:[24.09,18.88,20.68],exemptionLimit:35,dependentBenefit:63,invalidBenefit:[0,108,84],victimBenefit:108},"2011-01-01":{currency:"LVL",incomeTaxRate:25,riskFee:.25,socialTaxRates:[11,9.2,9.96],employerTaxRates:[24.09,20.16,21.82],exemptionLimit:45,dependentBenefit:70,invalidBenefit:[0,108,84],victimBenefit:108},"2012-01-01":{currency:"LVL",incomeTaxRate:25,riskFee:.25,socialTaxRates:[11,9.5,9.29],employerTaxRates:[24.09,20.8,22.53],exemptionLimit:45,dependentBenefit:70,invalidBenefit:[0,108,84],victimBenefit:108},"2013-01-01":{currency:"LVL",incomeTaxRate:24,riskFee:.25,socialTaxRates:[11,9.45,10.2],employerTaxRates:[24.09,20.68,22.35],exemptionLimit:45,dependentBenefit:70,invalidBenefit:[0,108,84],victimBenefit:108},"2013-07-01":{currency:"LVL",incomeTaxRate:24,riskFee:.25,socialTaxRates:[11,9.45,10.2],employerTaxRates:[24.09,20.68,22.35],exemptionLimit:45,dependentBenefit:80,invalidBenefit:[0,108,84],victimBenefit:108},"2014-01-01":{currency:"EUR",incomeTaxRate:24,riskFee:.36,socialTaxRates:[10.5,8.96,9.69],employerTaxRates:[23.59,20.16,21.79],exemptionLimit:75,dependentBenefit:165,invalidBenefit:[0,154,120],victimBenefit:154},"2015-01-01":{currency:"EUR",incomeTaxRate:23,riskFee:.36,socialTaxRates:[10.5,8.84,9.57],employerTaxRates:[23.59,19.86,21.5],exemptionLimit:75,dependentBenefit:165,invalidBenefit:[0,154,120],victimBenefit:154},"2016-01-01":{currency:"EUR",incomeTaxRate:23,riskFee:.36,socialTaxRates:[10.5,8.85,9.57],employerTaxRates:[23.59,19.9,21.51],exemptionLimit:75,dependentBenefit:175,invalidBenefit:[0,154,120],victimBenefit:154},"2017-01-01":{currency:"EUR",incomeTaxRate:23,riskFee:.36,socialTaxRates:[10.5,9.16,9.72],employerTaxRates:[23.59,20.57,21.85],exemptionLimit:60,dependentBenefit:175,invalidBenefit:[0,154,120],victimBenefit:154}},t=new WeakMap,i=function i(n,a){if(void 0===n&&(n=new Date),void 0===a&&(a={}),!(n instanceof Date))throw new Error("Can not recognize date format");var s=n.toISOString().split("T")[0],r=Object.keys(e),c=function(e,t){if(void 0===e&&(e=[]),"object"!=typeof e)throw new Error("Haystack must be an Object");var i=Array.isArray(e)?e:Object.keys(e);return i.push(t),i.sort(),i.indexOf(t)}(r,s);if(0===c)throw new Error("Library does not support dates before 2010-01-01");t.set(this,{rates:e[r[c-1]],options:o({dependents:0,pensionStatus:i.PENSION_STATUS_NONE,invalidStatus:i.INVALID_STATUS_NONE,victimStatus:!1,hasTaxBook:!0,hasContract:!0},a),netto:0,brutto:0,mode:i.MODE_BRUTTO,iin:0,vsaoi:{employee:0,employer:0},taxes:0,benefits:{dependents:0,extra:0},total:0,exemptionLimit:0})},n={brutto:{configurable:!0},netto:{configurable:!0},dependents:{configurable:!0},pensionStatus:{configurable:!0},invalidStatus:{configurable:!0},victimStatus:{configurable:!0},hasTaxbook:{configurable:!0},hasContract:{configurable:!0},total:{configurable:!0},taxes:{configurable:!0},iin:{configurable:!0},vsaoi:{configurable:!0},benefits:{configurable:!0},rates:{configurable:!0}};function o(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var n=function(t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]="[object Object]"===Object.prototype.toString.call(t[i])?o(e[i],t[i]):t[i])};for(var a in t)n(t[a]);return e}function a(e){return parseFloat(e.toFixed(2))}i.prototype._calc=function(e){void 0===e&&(e={});var n=this.rates,s=o(t.get(this),e);if(s.benefits.dependents=s.options.hasTaxBook?a(s.options.dependents*n.dependentBenefit):0,s.benefits.extra=s.options.hasTaxBook&&s.options.victimStatus?Math.max(a(n.invalidBenefit),n.victimBenefit):a(n.invalidBenefit),s.mode===i.MODE_NETTO){var r=n.incomeTaxRate/100,c=n.socialTaxRate/100,p=1-c-r+c*r;s.brutto=a(Math.max(0,s.netto-Math.min(s.netto,n.exemptionLimit+s.benefits.dependents+s.benefits.extra)*r)/p)}s.vsaoi.employer=a(s.brutto/100*n.employerTaxRate),s.vsaoi.employee=a(s.brutto/100*n.socialTaxRate),s.iin=s.brutto-s.vsaoi.employee-n.exemptionLimit-s.benefits.dependents-s.benefits.extra,s.iin=Math.max(s.iin*n.incomeTaxRate,0),s.iin=Math.round(s.iin)/100,s.taxes=a(n.riskFee+s.iin+s.vsaoi.employer+s.vsaoi.employee),s.total=a(n.riskFee+s.brutto+s.vsaoi.employer),s.mode===i.MODE_BRUTTO&&(s.netto=s.brutto-s.vsaoi.employee-s.iin),s.mode===i.MODE_NETTO&&(s.brutto=a(s.netto+s.iin+s.vsaoi.employee)),t.set(this,s)},n.brutto.get=function(){return t.get(this).brutto},n.brutto.set=function(e){var t={brutto:a(e=parseFloat(e)),mode:i.MODE_BRUTTO};this._calc(t)},n.netto.get=function(){return t.get(this).netto},n.netto.set=function(e){var t={netto:a(e=parseFloat(e)),mode:i.MODE_NETTO};this._calc(t)},n.dependents.get=function(){return t.get(this).options.dependents},n.dependents.set=function(e){e=parseInt(e);var t={options:{dependents:Math.max(0,e)}};this._calc(t)},n.pensionStatus.get=function(){return t.get(this).options.pensionStatus},n.pensionStatus.set=function(e){e in[i.PENSION_STATUS_NONE,i.PENSION_STATUS_BY_AGE,i.PENSION_STATUS_BY_SERVICE]&&this._calc({options:{pensionStatus:e}})},n.invalidStatus.get=function(){return t.get(this).options.invalidStatus},n.invalidStatus.set=function(e){e in[i.INVALID_STATUS_NONE,i.INVALID_STATUS_CAT_I,i.INVALID_STATUS_CAT_II,i.INVALID_STATUS_CAT_III]&&this._calc({options:{invalidStatus:e}})},n.victimStatus.get=function(){return t.get(this).options.victimStatus},n.victimStatus.set=function(e){this._calc({options:{victimStatus:!!e}})},n.hasTaxbook.get=function(){return t.get(this).options.hasTaxBook},n.hasTaxbook.set=function(e){this._calc({options:{hasTaxBook:!!e}})},n.hasContract.get=function(){return t.get(this).options.hasContract},n.hasContract.set=function(e){this._calc({options:{hasContract:!!e}})},n.total.get=function(){return t.get(this).total},n.taxes.get=function(){return t.get(this).taxes},n.iin.get=function(){return t.get(this).iin},n.vsaoi.get=function(){return t.get(this).vsaoi},n.benefits.get=function(){return t.get(this).benefits},n.rates.get=function(){var e=t.get(this);return{incomeTaxRate:e.rates.incomeTaxRate,riskFee:e.rates.riskFee,socialTaxRate:e.rates.socialTaxRates[e.options.pensionStatus],employerTaxRate:e.rates.employerTaxRates[e.options.pensionStatus],exemptionLimit:!e.options.hasTaxBook||e.options.invalidStatus||e.options.pensionStatus?0:e.rates.exemptionLimit,dependentBenefit:e.options.hasTaxBook?e.rates.dependentBenefit:0,invalidBenefit:e.rates.invalidBenefit[e.options.invalidStatus],victimBenefit:e.options.victimStatus&&e.options.hasTaxBook?e.rates.victimBenefit:0}},Object.defineProperties(i.prototype,n),i.INVALID_STATUS_NONE=0,i.INVALID_STATUS_CAT_I=1,i.INVALID_STATUS_CAT_II=1,i.INVALID_STATUS_CAT_III=2,i.PENSION_STATUS_NONE=0,i.PENSION_STATUS_BY_AGE=1,i.PENSION_STATUS_BY_SERVICE=2,i.MODE_BRUTTO=1,i.MODE_NETTO=2,module.exports=i;
//# sourceMappingURL=alga.js.map
